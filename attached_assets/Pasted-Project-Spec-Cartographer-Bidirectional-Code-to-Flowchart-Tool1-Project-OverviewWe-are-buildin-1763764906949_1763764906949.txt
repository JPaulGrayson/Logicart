Project Spec: "Cartographer" - Bidirectional Code-to-Flowchart Tool1. Project OverviewWe are building a React-based web application called "Cartographer".Goal: To visualize code execution logic (control flow) as an interactive flowchart in real-time.Core Value: It helps beginners understand loops, recursion, and logic branching by "watching" code run step-by-step on a diagram.2. Tech Stack RequirementsFramework: React 18+ (Vite)Language: JavaScript/TypeScriptStyling: Tailwind CSS (Dark mode UI, Light mode Canvas)Icons: Lucide-ReactDiagramming: Use ReactFlow or raw SVG (Raw SVG preferred for performance if logic is simple, ReactFlow if we want drag-and-drop later).3. Key Features to ImplementA. The Parser Engine (Logic Extraction)Create a parser that takes a string of JavaScript code and converts it into a nodes and edges array.Regex/AST: You can start with Regex (for MVP) or use acorn to parse the AST for robust support.Detection: Identify if/else, while/for loops, console.log, and variable assignments.Hierarchy: Track indentation to understand block scope (nested loops).B. The Visual Interpreter (Execution Engine)Implement a step-by-step interpreter loop.State: Maintain currentLine, variables (object), and callStack (array).Execution:Parse variable assignments (let x = 1).Evaluate conditions (if (x < 5)).Handle console.log to a mock terminal.Recursion Support: When a function calls itself, push the current state to callStack and jump to the start of the function. When return is hit, pop the stack.C. Bidirectional Editing EngineImplement two-way synchronization between the diagram and the code.Content Sync (Easy): Allow users to double-click a node and edit the text (e.g., change x < 5 to x < 10). The engine must find the corresponding line in the source code and update it.Structural Sync (Advanced): If using ReactFlow, allow users to drag nodes to reorder them. The engine must reconstruct the AST and generate new JavaScript code reflecting the new flow order.D. The UI LayoutLeft Sidebar: File Explorer (Mock file system with 3-4 preset examples: index.js, recursion.js, loop.js).Middle Panel: Code Editor (Monaco Editor or simple Textarea) + Terminal + Memory Watcher (Variables list).Right Panel: The Flowchart Canvas (Light background, high contrast nodes).Controls: Play, Pause, Step-Over, Speed Slider.Export: Button to download SVG.4. Design SystemTheme: "Cyber-Industrial". Dark slate/blue interface (bg-slate-900), clean white diagram canvas (bg-slate-50).Nodes: * Process: Rectangles (Blue/White)Decisions: Diamonds (Amber/Yellow)Start/End: Rounded (Purple)Feedback: Active nodes should glow.5. Specific Interaction RequirementsBidirectional-ish: Changing code updates the chart immediately.Step-Over: Users must be able to pause and click "Step" to advance one logical node at a time.Auto-Scroll: If the flowchart is large, the view should auto-center on the currently active node during playback.6. Example Code to IncludePlease include a recursion.js example file in the default state:let n = 5;
if (n <= 1) return 1;
let sub = factorial(n-1);
return n * sub;
Instruction: Please scaffold this project structure and begin implementing the Parser Engine first.