# LogiGo: Interactive Flowcharts for Your Code

**LogiGo** is a developer tool that brings live, interactive flowchart visualization directly into your React applications. It converts your source code into navigable diagrams *automatically*, allowing you to visualize execution flow, track variables, and "time travel" through your logic.

## Key Features

* **Live Visualization:** Watch your code execute in real-time on a generated flowchart.
* **Time Travel Debugging:** Step backward and forward through execution history with a timeline slider.
* **Synchronous & Safe:** Zero impact on your function signatures (no `async/await` required). Includes infinite loop protection.
* **Build-Time Analysis:** Uses a Vite plugin to generate flowcharts during build, ensuring zero runtime parsing overhead in production.
* **Hot Reload Support:** Automatically detects code changes and refreshes the visualization without losing your session.

---

## Installation

LogiGo consists of a Vite plugin (for analysis) and a React component (for visualization).

```bash
# Install the Embed component (runtime dependency)
npm install logigo-embed

# Install the Vite plugin (dev dependency)
npm install logigo-vite-plugin --save-dev
```

---

## Integration Guide

### Step 1: Add the Vite Plugin

The plugin analyzes your code during the build process to generate the `logigo-manifest.json`.

```typescript
// vite.config.ts
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';
import logigo from 'logigo-vite-plugin';

export default defineConfig({
  plugins: [
    react(),
    logigo({
      // Only instrument source files you want to visualize
      include: ['src/**/*.ts', 'src/**/*.tsx'],
      exclude: ['src/main.tsx', '**/*.test.ts'],
      
      // Auto-inject checkpoints (Default: true)
      autoInstrument: true 
    })
  ]
});
```

### Step 2: Add the Embed Component

Place the `<LogiGoEmbed />` component at the root of your app. It will automatically fetch the manifest generated by the plugin.

```tsx
// src/App.tsx
import { LogiGoEmbed } from 'logigo-embed';
import '@xyflow/react/dist/style.css';

function App() {
  return (
    <div>
      <YourAppContent />
      
      {/* The floating debug panel */}
      <LogiGoEmbed 
        manifestUrl="/logigo-manifest.json" 
        position="bottom-right"
        theme="dark"
      />
    </div>
  );
}
```

---

## How It Works

LogiGo uses a **Split Architecture** to ensure high performance:

* **Build Time (The Brain):** The Vite plugin parses your AST, generates stable Node IDs (resistant to whitespace changes), and creates a `manifest.json`. It injects lightweight `LogiGo.checkpoint()` calls into your code.

* **Runtime (The Nervous System):** The injected checkpoints send data to the LogiGoRuntime. This runtime batches updates into microtasks to prevent blocking the main thread.

* **Visualization (The Face):** The LogiGoEmbed component reads the manifest and the runtime messages to render the active flowchart overlay.

### Safety Features

* **Infinite Loop Protection:** The runtime automatically throttles and drops checkpoints if the queue exceeds 5,000 items, preventing your browser tab from crashing during accidental infinite loops.

* **Lazy Loading:** The visualization engine (Dagre) is lazy-loaded only when needed, keeping your initial bundle size small.

---

## Component API

### `<LogiGoEmbed />`

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `manifestUrl` | string | Required | URL to the `logigo-manifest.json` generated by Vite. |
| `manifestHash` | string | undefined | Expected manifest hash for HMR session syncing. |
| `position` | string | `'bottom-right'` | Screen position: `'bottom-right'`, `'bottom-left'`, `'top-right'`, `'top-left'`. |
| `defaultOpen` | boolean | `true` | Whether the panel starts expanded. |
| `showVariables` | boolean | `true` | Show the variable inspector panel. |
| `showHistory` | boolean | `true` | Show the execution timeline/history. |
| `theme` | `'dark'` \| `'light'` | `'dark'` | UI theme for the panel. |
| `code` | string | undefined | **Static Mode Only:** Pass raw source code string here to visualize it without a manifest (useful for demos). |

---

## Troubleshooting

### "Ghost UI" / Stale Flowchart

If you see the flowchart desync from your code after a Hot Reload (HMR):

* LogiGo automatically detects hash mismatches and refreshes. If it persists, click the "Refresh" button in the panel header.

### "Queue Overflow" Warning in Console

* This means your code is executing extremely fast (e.g., a tight `while(true)` loop). LogiGo has temporarily paused tracking to save your browser. It will resume automatically when execution slows down.

---

## NPM Packages

| Package | Description | Install |
|---------|-------------|---------|
| [logigo-core](./packages/logigo-core) | Runtime library for checkpoint-based debugging | `npm install logigo-core` |
| [logigo-embed](./packages/logigo-embed) | React component for flowchart visualization | `npm install logigo-embed` |
| [logigo-vite-plugin](./packages/logigo-vite-plugin) | Vite plugin for build-time instrumentation | `npm install logigo-vite-plugin --save-dev` |

---

## Development

Build all packages:

```bash
# Build each package
cd packages/logigo-core && npm run build
cd packages/logigo-embed && npm run build
cd packages/logigo-vite-plugin && npm run build
```

Run the development server:

```bash
npm run dev
```

---

**Made for Vibe Coders who learn by seeing**
